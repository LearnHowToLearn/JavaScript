<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>終極密碼</title>
</head>

<body>
    <h2>終極密碼</h2>
    <h5>遊戲範圍：0~100之間</h5>
    <input id="output" type="text"><br />
    <input id="input" type="text">
    <div>
        <button onclick="showNumber(1)" class="button">1</button>
        <button onclick="showNumber(2)" class="button">2</button>
        <button onclick="showNumber(3)" class="button">3</button>
        <button onclick="showNumber(4)" class="button">4</button>
        <button onclick="showNumber(5)" class="button">5</button>
        <button onclick="showNumber(6)" class="button">6</button>
        <button onclick="showNumber(7)" class="button">7</button>
        <button onclick="showNumber(8)" class="button">8</button>
        <button onclick="showNumber(9)" class="button">9</button>
    </div>
    <div>
        <input onclick="check()" type="button" value="確定">
        <input onclick="clear()" type="button" value="取消">
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script>
        // for (var i = 1; i < 10; i++) {
        //     document.getElementById("button").innerHTML += "<button style='width:100px;height:100px;margin:40px 20px 20px 0;'>" + i + "</button>";
        // }

        // var buttonOnClick = document.getElementsByClassName("button");
        // for(var i = 0; i < 9; i++){
        //     buttonOnClick[i].onclick = showNumber;
        // }

        var boom = 0;// 終極密碼
        var producesResult = 0;// 紀錄是否有終極密碼
        var min = 0;// 範圍中的最小值
        var max = 100;// 範圍中的最大值

        // 產生隨機數字
        if (producesResult == 0) {
            boom = Math.floor(Math.random() * 99) + 1;
            producesResult += 1;
        }

        // 顯示玩家輸入的數字
        function showNumber(number) {
            document.getElementById("input").value += number;
        }

        // 確定鍵
        function check() {
            var input = document.getElementById("input").value;

            if (isNaN(input)) {// 確定玩家所輸出的是數字
                alert("請輸入數字");
            }
            else {
                if (input > min && input < max) {// 確定玩家所猜數字在範圍內
                    // 猜中終極密碼
                    if (input == boom) {
                        alert("boom!");
                        producesResult = 0;
                        min = 0;
                        max = 100;
                        document.getElementById("input").value = "";
                        document.getElementById("output").value = min + "~" + max;
                    }
                    // 沒猜中則縮小範圍並顯示
                    else {
                        var difference = input - boom;
                        if (difference > 0) {
                            document.getElementById("output").value = min + "~" + input;
                            max = input;
                            document.getElementById("input").value = "";
                        }
                        else {
                            document.getElementById("output").value = input + "~" + max;
                            min = input;
                            document.getElementById("input").value = "";
                        }
                    }
                }
                else {
                    alert("請猜範圍內的數字");
                }
            }
        }

        // 取消鍵清空輸入框
        function clear() {
            document.getElementById("input").value = "";
        }

        // 在輸入框輸入完後按下Enter直接觸發function
        document.getElementById("input").onkeyup = function (event) {
            if (event.keyCode == 13) {
                check();
            }
        };
    </script>

</body>

</html>